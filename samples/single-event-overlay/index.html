<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js">
  <!--<![endif]-->

  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title></title>
    <meta name="description" content="" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link
      rel="stylesheet"
      href="//s3-eu-west-1.amazonaws.com/fcdesignsystem/1.0.0/css/fusionDesign.css"
    />
    <link rel="stylesheet" href="../styles.css" />
    <link
      rel="stylesheet"
      href="../../assets/css/fusioncharts.theme.fusion.css"
    />
  </head>

  <body>
    <!--[if lt IE 7]>
      <p class="browsehappy">
        You are using an <strong>outdated</strong> browser. Please
        <a href="#">upgrade your browser</a> to improve your experience.
      </p>
    <![endif]-->

    <div id="chart-container"></div>

    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    <!-- FusionCharts -->
    <script src="https://cdn.fusioncharts.com/fusioncharts/latest/fusioncharts.js"></script>
    <script src="https://cdn.fusioncharts.com/fusioncharts/latest/fusioncharts.timeseries.js"></script>
    <script src="../../assets/scripts/fusioncharts/themes/fusioncharts.theme.fusion.js"></script>
    <!-- jQuery-FC -->
    <script src="../../assets/scripts/fusioncharts.jqueryplugin.min.js"></script>

    <script type="text/javascript">
      var jsonify = res => res.json();
      // This is the remote url to fetch the data.
      const dataFetch = fetch(
        'https://s3.eu-central-1.amazonaws.com/fusion.store/ft/data/single-event-overlay-data.json'
      ).then(jsonify);
      // This is the remote url to fetch the schema.
      const schemaFetch = fetch(
        'https://s3.eu-central-1.amazonaws.com/fusion.store/ft/schema/single-event-overlay-schema.json'
      ).then(jsonify);

      Promise.all([dataFetch, schemaFetch]).then(res => {
        const data = res[0];
        const schema = res[1];
        // First we are creating a DataStore
        const fusionDataStore = new FusionCharts.DataStore();
        // After that we are creating a DataTable by passing our data and schema as arguments
        const fusionTable = fusionDataStore.createDataTable(data, schema);

        jQuery('document').ready(function() {
          $('#chart-container').insertFusionCharts({
            type: 'timeseries',
            width: '100%',
            height: '100%',
            dataFormat: 'json',
            dataSource: {
              data: fusionTable,
              caption: {
                text: 'Interest Rate Analysis'
              },
              subCaption: {
                text: 'Federal Reserve (USA)'
              },
              yAxis: [
                {
                  plot: 'Interest Rate',
                  format: {
                    suffix: '%'
                  },
                  title: 'Interest Rate'
                }
              ],
              xAxis: {
                plot: 'Time',
                timemarker: [
                  {
                    start: 'Mar-1980',
                    label: 'US inflation peaked at 14.8%.',
                    timeFormat: '%b-%Y',
                    style: {
                      marker: {
                        fill: '#D0D6F4'
                      }
                    }
                  },
                  {
                    start: 'May-1981',
                    label:
                      'To control inflation, the Fed started {br} raising interest rates to over {br} 20%.',
                    timeFormat: '%b-%Y'
                  },
                  {
                    start: 'Jun-1983',
                    label:
                      'By proactive actions of Mr.Volcker, {br} the inflation falls to 2.4% {br} from the peak of over 14% {br} just three years ago.',
                    timeFormat: '%b-%Y',
                    style: {
                      marker: {
                        fill: '#D0D6F4'
                      }
                    }
                  },
                  {
                    start: 'Oct-1987',
                    label:
                      'The Dow Jones Industrial Average lost {br} about 30% of itâ€™s value.',
                    timeFormat: '%b-%Y',
                    style: {
                      marker: {
                        fill: '#FBEFCC'
                      }
                    }
                  },
                  {
                    start: 'Jan-1989',
                    label:
                      'George H.W. Bush becomes {br} the 41st president of US!',
                    timeFormat: '%b-%Y'
                  },
                  {
                    start: 'Aug-1990',
                    label:
                      'The oil prices spiked to $35 {br} per barrel from $15 per barrel {br} because of the Gulf War.',
                    timeFormat: '%b-%Y'
                  },
                  {
                    start: 'Dec-1996',
                    label:
                      'Alan Greenspan warns of the dangers {br} of "irrational exuberance" in financial markets, {br} an admonition that goes unheeded',
                    timeFormat: '%b-%Y'
                  },
                  {
                    start: 'Sep-2008',
                    label: 'Lehman Brothers collapsed!',
                    timeFormat: '%b-%Y'
                  },
                  {
                    start: 'Mar-2009',
                    label:
                      'The net worth of US households {br} stood at a trough of $55 trillion.',
                    timeFormat: '%b-%Y',
                    style: {
                      marker: {
                        fill: '#FBEFCC'
                      }
                    }
                  },
                  {
                    start: 'Oct-2009',
                    label:
                      'Unemployment rate peaked {br} in given times to 10%.',
                    timeFormat: '%b-%Y'
                  }
                ]
              }
            }
          });
        });
      });
    </script>
  </body>
</html>
